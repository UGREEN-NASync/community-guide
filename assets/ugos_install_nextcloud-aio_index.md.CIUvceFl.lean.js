import{_ as i,c as e,a2 as a,o as t}from"./chunks/framework.C57abF2z.js";const k=JSON.parse('{"title":"Setting up Nextcloud-AIO","description":"","frontmatter":{},"headers":[],"relativePath":"ugos/install/nextcloud-aio/index.md","filePath":"ugos/install/nextcloud-aio/index.md"}'),n={name:"ugos/install/nextcloud-aio/index.md"};function l(o,s,h,r,p,d){return t(),e("div",null,s[0]||(s[0]=[a(`<h1 id="setting-up-nextcloud-aio" tabindex="-1">Setting up Nextcloud-AIO <a class="header-anchor" href="#setting-up-nextcloud-aio" aria-label="Permalink to &quot;Setting up Nextcloud-AIO&quot;">​</a></h1><p>This guide assumes that you have ssh access to your UGreen NAS. It is recommended to use Visual Studio Code to access your servers directories and terminal/CLI.</p><p>The setup process is similar to <a href="/community-guide/ugos/install/npm/">Nginx Proxy Manager (NPM)</a> and all docker services in general for that matter. For more information visit the <a href="https://github.com/nextcloud/all-in-one" target="_blank" rel="noreferrer">nextcloud-aio GitHub repository</a></p><h2 id="instructions" tabindex="-1">Instructions <a class="header-anchor" href="#instructions" aria-label="Permalink to &quot;Instructions&quot;">​</a></h2><p>Create a new directory called <code>nextcloud-aio</code> within the docker folder and create a new <code>compose.yaml</code> file. The docker compose file for nextcloud-aio can be found <a href="https://raw.githubusercontent.com/UGREEN-NASync/community-guide/refs/heads/main/docs/ugos/install/nextcloud-aio/compose.yaml" target="_blank" rel="noreferrer">here</a>.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>The name of the folder always dictates the prefix that docker specifies for all things automatically created, e.g. volumes, networks, service names (unless specified otherwise).</p></div><p>Save the compose file, right click the <code>nextcloud-aio</code> folder in the VSCode Explorer and choose <code>Open in integrated terminal</code>. Launch the container by executing</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span></span></code></pre></div><p>Next navigate to your reverse proxy setup (i.e. NPM) and add a new proxy host. Enter <code>nextcloud.YOURDOMAIN.com</code> as your domain name, type in your servers local IP address in the IP address and type in port <code>11000</code> (this is the Apache port made available by nextlcoud-aio). In NPM enable <code>Block common exploits</code> and <code>Websocket support</code>. Navigate to the SSL tab and enable all options and select your wildcard certificate that you created previously. Finally navigate to the advanced tab and paste in the following</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">client_body_buffer_size 512k;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">proxy_read_timeout 86400s;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">client_max_body_size 0;</span></span></code></pre></div><p>Next, navigate to your nextcloud domain (i.e. nextcloud.YOURDOMAIN.com) and follow the setup instructions <strong>carefully</strong>. Once your nextcloud instance is running, access the <code>config.php</code> by executing</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --volume</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nextcloud_aio_nextcloud:/var/www/html:rw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> alpine</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;apk add --no-cache nano &amp;&amp; nano /var/www/html/config/config.php&quot;</span></span></code></pre></div><p>Change or add the following parameters in the <code>config.php</code>. A list with all available parameters can be found in the <a href="https://docs.nextcloud.com/server/latest/admin_manual/configuration_server/config_sample_php_parameters.html" target="_blank" rel="noreferrer">Nextcloud docs</a>.</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;default_phone_region&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;DE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># your locale, i.e. &#39;EN&#39; according to ISO 3166-1 A-2</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;maintenance_window_start&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># UTC Hour for maintenance windows</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;default_locale&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;de_DE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># your locale, i.e. &#39;en_US&#39; according to ISO 639 language codes AND ISO-3166 country codes</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;default_timezone&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Europe/Berlin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># your timezone, i.e. &#39;America/Chicago&#39; or &#39;America/New_York&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;system_addressbook_exposed&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;no&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># OPTIONAL to disable system addressbook</span></span></code></pre></div><h2 id="useful-commands-for-nextcloud-aio" tabindex="-1">Useful commands for nextcloud-aio <a class="header-anchor" href="#useful-commands-for-nextcloud-aio" aria-label="Permalink to &quot;Useful commands for nextcloud-aio&quot;">​</a></h2><p>To run occ commands execute</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> www-data</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nextcloud-aio-nextcloud</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> occ</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> YOUR_COMMAND</span></span></code></pre></div><h2 id="helpful-links" tabindex="-1">Helpful Links <a class="header-anchor" href="#helpful-links" aria-label="Permalink to &quot;Helpful Links&quot;">​</a></h2><ul><li><a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones#List" target="_blank" rel="noreferrer">IANA identifiers for timezones</a></li><li><a href="https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes#Current_ISO_3166_country_codes" target="_blank" rel="noreferrer">ISO 3166-1 country codes</a></li><li><a href="https://en.wikipedia.org/wiki/List_of_ISO_639_language_codes#Table" target="_blank" rel="noreferrer">ISO 639 language codes</a></li></ul><div class="info custom-block"><p class="custom-block-title">CREDIT</p><p>This guide was created by <a href="https://github.com/vzvl" target="_blank" rel="noreferrer">vzvl</a></p></div>`,20)]))}const u=i(n,[["render",l]]);export{k as __pageData,u as default};
